<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mi Perfil - Leones Calistenia</title>
    <link rel="stylesheet" href="css/styles.css">

    <script type="module">
  // Import the functions you need from the SDKs you need
// Import the functions you need from the SDKs you need
  import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-app.js";
  import { getAuth } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-auth.js";
  import { getFirestore } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-firestore.js";
import { onAuthStateChanged } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-auth.js";
import { doc, getDoc } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-firestore.js";

// TODO: Add SDKs for Firebase products that you want to use
// https://firebase.google.com/docs/web/setup#available-libraries

// Your web app's Firebase configuration
// For Firebase JS SDK v7.20.0 and later, measurementId is optional
const firebaseConfig = {
  apiKey: "AIzaSyCbugupJev7CVmVRAr8YrFKhIfvfC607UE",
  authDomain: "leones-calistenia-bd720.firebaseapp.com",
  projectId: "leones-calistenia-bd720",
  storageBucket: "leones-calistenia-bd720.firebasestorage.app",
  messagingSenderId: "514679371362",
  appId: "1:514679371362:web:9bbb6305be4b5c472c433b",
  measurementId: "G-8H7BK31Y21"
};

// Initialize Firebase
const app = initializeApp(firebaseConfig);
const analytics = getAnalytics(app);

onAuthStateChanged(auth, async (user) => {
  if (user) {
    const snap = await getDoc(doc(db, "users", user.uid));
    if (snap.exists()) {
      const data = snap.data();
      document.getElementById("user-name").innerText = data.first_name + " " + data.last_name;
      document.getElementById("user-email").innerText = data.email;
    }
  } else {
    window.location.href = "auth.html";
  }
});

  export const auth = getAuth(app);
  export const db = getFirestore(app);
    </script>
</head>
<body>
    <header>
        <nav class="navbar">
            <script src="js/navbar_toggle.js"></script>
            <div class="logo"><a href="index.html" class="logo"><img src="/resources/logo.png" alt="Logo" class="logo_image">Leones Calistenia</a></div>
            <ul class="nav-links">
                <li><a href="index.html">Inicio</a></li>
                <li><a href="classes.html">Clases</a></li>
                <li><a href="profile.html" class="active">Mi Perfil</a></li>
                <li><a href="auth.html">Iniciar Sesión</a></li>
            </ul>
        </nav>
    </header>
    <main>
        <section class="profile-info">
            <h2>Mi Perfil</h2>
            <div id="user-info">
                <!-- Datos del usuario se llenarán dinámicamente -->
            </div>

            <!-- Botón para eliminar cuenta con advertencia -->
            <button id="delete-account" class="delete-btn">Eliminar Cuenta</button>
            <br/>
            <br/>
            <button id="logout-button" class="btn">Cerrar Sesión</button>
        </section>
        <section class="packages">
            <h2>Mis Paquetes de Clases</h2>
            <div id="packages-container">
                <!-- Paquetes cargados dinámicamente con JS -->
            </div>
        </section>
        <section class="purchase-packages">
            <h2>Comprar Paquete de Clases</h2>
            <select id="package-selection">
                <option value="2">2 Clases - $10</option>
                <option value="7">7 Clases - $30</option>
                <option value="30">30 Clases - $100</option>
                <option value="60">60 Clases - $180</option>
            </select>
            <button id="purchase-package">Comprar</button>
            <p id="purchase-status"></p>
        </section>        
    </main>
    <script src="js/auth.js" defer></script>
    <script src="js/profile.js" defer></script>
    <script src="js/main.js" defer></script>
    <footer>
        <p>&copy; 2025 Leones Calistenia. Todos los derechos reservados.</p>
    </footer>
</body>
</html>
